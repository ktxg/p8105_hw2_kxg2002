---
title: "p8105_hw2_kxg2002.Rmd"
author: "Katie"
date: "10/9/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(readxl) 
library(dplyr)
```

## Load in the trash wheel data 

```{r}
trash_wheel_data = 
  read_excel(
    path = "./Data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    range = "A2:N408") %>% 
  janitor::clean_names() %>% 
  select(-homes_powered) %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

## Read and clean 2017 and 2018 precip data 

```{r}
precip_data_2017 = 
  read_excel(
    path = "./Data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",  
    sheet = 6, 
    range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate(year = "2017") 
  
  
precip_data_2018 = 
  read_excel(
    path = "./Data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = 5, 
    range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  drop_na(total) %>%  
  mutate(year = "2018") 
```

## Combine precip data sets 

```{r}
precip_data = 
  full_join(precip_data_2017, precip_data_2018) %>% 
  mutate(month = month.name[month])
```

## Write about the data 

Looking at the two datasets from 2017 and 2018, we can see that there was a substantial amount of precipitation for both years in May and July. However, there were also differences. For example, in 2018 there was a large amount of precipitation in September compared to 2017, where there was not a lot of precipitation. There were `r nrow(precip_data_2017)` observations in the 2017 precipiation data, `r nrow(precip_data_2018)` observations in the 2018 precipitation data, and `r nrow(trash_wheel_data)` observations from the trash wheel data. Key variables in the precipitation data included `r variable.names(precip_data)`. Key variables in the trash wheel data included `r variable.names(trash_wheel_data)`. The total precipitation in 2018 was `r sum(pull(precip_data_2018, total))`, and the median number of sports balls found in dumpsters in 2017 were `r median(pull(trash_wheel_data, sports_balls))`. 

## Load, read, and clean data in pols-month.csv

```{r}
polls_data = 
  read.csv("./Data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(col = mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(year = as.integer(year), month = as.integer(month), day = as.integer(day)) %>%  
  mutate(month = month.abb[month]) %>% 
  select(year, month, day, prez_gop, prez_dem, everything()) %>% 
  pivot_longer(
    prez_gop:prez_dem,
    names_to = "president", 
    values_to = "status"
    ) %>% 
  select(year, month, president, everything(), -day, -status) 
```

